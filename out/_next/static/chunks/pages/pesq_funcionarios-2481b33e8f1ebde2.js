(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{2183:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pesq_funcionarios",function(){return s(6606)}])},1089:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var n=s(5893),r=s(7294),a=s(1163),l=s(6816);function c(e,t){return function(s){let c=(0,a.useRouter)(),[i,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{var e;let{data:{user:s},error:n}=await l.O.auth.getUser();if(n||!s){c.push("/login");return}let r=null===(e=s.user_metadata)||void 0===e?void 0:e.role;if(!r||!t.includes(r)){c.push("/unauthorized");return}o(r),u(!1)})()},[c,t]),d)?(0,n.jsx)("p",{children:"Carregando..."}):i?(0,n.jsx)(e,{...s,role:i}):null}}},2761:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(1134).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3461:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(1134).Z)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},1949:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(1134).Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(1134).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7864:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(1134).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1199:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(1134).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},6606:function(e,t,s){"use strict";s.r(t);var n=s(5893),r=s(7294),a=s(1163),l=s(6816),c=s(1089),i=s(2761),o=s(1199),d=s(6127),u=s(3461),x=s(7864),h=s(1949);t.default=(0,c.t)(function(e){let{role:t}=e,s=(0,a.useRouter)(),[c,f]=(0,r.useState)([]),[m,p]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),j=async e=>{y(!0);let t=l.O.from("funcionarios").select("*").order("created_at",{ascending:!1});e&&""!==e.trim()&&(t=t.ilike("nome","%".concat(e,"%")));let{data:s,error:n}=await t;y(!1),n?(console.error(n),alert(n.message)):f(s||[])};(0,r.useEffect)(()=>{j()},[]);let w=async e=>{confirm("Tem certeza que deseja excluir este funcion\xe1rio?")&&(await l.O.from("funcionarios").delete().eq("id",e),j(m))};return(0,n.jsxs)("div",{className:"min-h-screen bg-[#006400] flex flex-col items-center justify-start px-4 py-10 relative",children:[(0,n.jsx)("button",{onClick:()=>s.push("/dashboard"),className:"absolute top-4 right-4 bg-white text-[#006400] rounded-full p-2 shadow-md hover:bg-emerald-100 transition","aria-label":"Voltar",children:(0,n.jsx)(i.Z,{className:"w-6 h-6"})}),(0,n.jsxs)("div",{className:"w-full max-w-6xl bg-[#2e8b57] rounded-[30px] p-8 shadow-2xl z-10 text-white",children:[(0,n.jsxs)("h1",{className:"text-4xl font-bold text-center mb-8 flex items-center justify-center gap-2 drop-shadow",children:[(0,n.jsx)(o.Z,{className:"w-8 h-8"})," Pesquisa de Funcion\xe1rios"]}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[(0,n.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"Digite o nome do funcion\xe1rio...",className:"w-full md:w-2/3 px-6 py-3 rounded-full bg-[#006400] text-white font-medium placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white shadow-md"}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,n.jsxs)("button",{onClick:()=>{j(m)},className:"flex items-center gap-2 bg-white text-[#006400] font-semibold px-5 py-2 rounded-full hover:bg-emerald-100 transition shadow",children:[(0,n.jsx)(d.Z,{className:"w-5 h-5"})," Pesquisar"]}),(0,n.jsxs)("button",{onClick:()=>s.push("/signup-funcionario"),className:"flex items-center gap-2 bg-white text-[#006400] font-semibold px-5 py-2 rounded-full hover:bg-emerald-100 transition shadow",children:[(0,n.jsx)(u.Z,{className:"w-5 h-5"})," Cadastrar Funcion\xe1rio"]})]})]}),b?(0,n.jsx)("p",{className:"text-center text-lg font-semibold",children:"Carregando..."}):0===c.length?(0,n.jsx)("p",{className:"text-center text-lg font-semibold",children:"Nenhum funcion\xe1rio encontrado."}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-[#1f6f43] text-white text-sm sm:text-base",children:[(0,n.jsx)("th",{className:"px-4 py-3",children:"Nome"}),(0,n.jsx)("th",{className:"px-4 py-3",children:"CPF"}),(0,n.jsx)("th",{className:"px-4 py-3",children:"Fun\xe7\xe3o"}),(0,n.jsx)("th",{className:"px-4 py-3",children:"Endere\xe7o"}),(0,n.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,n.jsx)("th",{className:"px-4 py-3",children:"Telefone"}),(0,n.jsx)("th",{className:"px-4 py-3 text-center",children:"A\xe7\xf5es"})]})}),(0,n.jsx)("tbody",{children:c.map(e=>(0,n.jsxs)("tr",{className:"odd:bg-[#2e8b57] even:bg-[#237e4d] text-white",children:[(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.nome}),(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.cpf}),(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.funcao}),(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.endereco}),(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.email}),(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.telefone}),(0,n.jsx)("td",{className:"px-4 py-3 border border-[#006400] text-center",children:(0,n.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,n.jsx)("button",{onClick:()=>w(e.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold rounded-full px-3 py-1 shadow-sm","aria-label":"Excluir funcion\xe1rio ".concat(e.nome),children:(0,n.jsx)(x.Z,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>s.push("/updates/update_funcionarios/".concat(e.id)),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full px-3 py-1 shadow-sm","aria-label":"Editar funcion\xe1rio ".concat(e.nome),children:(0,n.jsx)(h.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]})},["funcionario_administrador"])}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2183)}),_N_E=e.O()}]);