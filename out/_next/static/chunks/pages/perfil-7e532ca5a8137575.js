(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{1044:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/perfil",function(){return t(7460)}])},1089:function(e,s,t){"use strict";t.d(s,{t:function(){return o}});var a=t(5893),n=t(7294),r=t(1163),i=t(6816);function o(e,s){return function(t){let o=(0,r.useRouter)(),[l,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{var e;let{data:{user:t},error:a}=await i.O.auth.getUser();if(a||!t){o.push("/login");return}let n=null===(e=t.user_metadata)||void 0===e?void 0:e.role;if(!n||!s.includes(n)){o.push("/unauthorized");return}d(n),u(!1)})()},[o,s]),c)?(0,a.jsx)("p",{children:"Carregando..."}):l?(0,a.jsx)(e,{...t,role:l}):null}}},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(1134).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2126:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(1134).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1949:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(1134).Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7460:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var a=t(5893),n=t(7294),r=t(9332),i=t(6816),o=t(1089),l=t(2761),d=t(8267),c=t(1134);let u=(0,c.Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),h=(0,c.Z)("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),m=(0,c.Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),x=(0,c.Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),f=(0,c.Z)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var p=t(1949),j=t(2126);let b=(0,c.Z)("book-open-check",[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]]);var w=t(775),g=(0,o.t)(function(){let e=(0,r.useRouter)(),[s,t]=(0,n.useState)(null),[o,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{let{data:{user:e},error:s}=await i.O.auth.getUser();if(s||!e){c("Usu\xe1rio n\xe3o autenticado");return}let{data:a}=await i.O.from("alunos").select("*").eq("user_id",e.id).maybeSingle();if(a){t({nome:a.nome,email:a.email,cpf:a.cpf,endereco:a.endereco,telefone:a.telefone,matricula:a.matricula,curso:a.curso,serie:a.serie,tipo:"aluno"});return}let{data:n}=await i.O.from("funcionarios").select("*").eq("user_id",e.id).maybeSingle();if(n){t({nome:n.nome,email:n.email,cpf:n.cpf,endereco:n.endereco,telefone:n.telefone,funcao:n.funcao,tipo:"administrador"===n.funcao?"funcionario_administrador":"funcionario"});return}c("Usu\xe1rio n\xe3o encontrado")})()},[]);let g=async()=>{await i.O.auth.signOut(),e.push("/login")};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#006400] flex items-center justify-center px-4 py-10 relative",children:[(0,a.jsx)("button",{onClick:()=>{"aluno"===s.tipo?e.push("/painel_aluno"):("funcionario"===s.tipo||"funcionario_administrador"===s.tipo)&&e.push("/dashboard")},className:"absolute top-4 right-4 bg-white text-[#006400] rounded-full p-2 shadow-md hover:bg-emerald-100 transition",children:(0,a.jsx)(l.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"w-full max-w-3xl bg-[#2e8b57] text-white rounded-[30px] shadow-2xl px-[25px] py-12 space-y-6 relative z-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-6 drop-shadow",children:"Meu Perfil"}),o&&(0,a.jsx)("p",{className:"text-red-300 font-semibold text-center",children:o}),s?(0,a.jsxs)("div",{className:"space-y-6 text-base sm:text-lg",children:[(0,a.jsxs)("div",{className:"bg-[#1f6f43] rounded-2xl p-6 shadow-md",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 border-b border-white pb-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"})," Informa\xe7\xf5es Pessoais"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nome:"})," ",s.nome]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",(0,a.jsx)(u,{className:"inline w-4 h-4 mr-1"}),s.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"CPF:"})," ",(0,a.jsx)(h,{className:"inline w-4 h-4 mr-1"}),s.cpf]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Endere\xe7o:"})," ",(0,a.jsx)(m,{className:"inline w-4 h-4 mr-1"}),s.endereco]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Telefone:"})," ",(0,a.jsx)(x,{className:"inline w-4 h-4 mr-1"}),s.telefone]})]}),"aluno"===s.tipo&&(0,a.jsxs)("div",{className:"bg-[#1f6f43] rounded-2xl p-6 shadow-md",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 border-b border-white pb-2",children:[(0,a.jsx)(f,{className:"w-5 h-5"})," Informa\xe7\xf5es Acad\xeamicas"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Matr\xedcula:"})," ",s.matricula]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"S\xe9rie:"})," ",s.serie]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Curso:"})," ",s.curso]})]}),"funcionario"===s.tipo||"funcionario_administrador"===s.tipo?(0,a.jsxs)("div",{className:"bg-[#1f6f43] rounded-2xl p-6 shadow-md",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 border-b border-white pb-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"})," Informa\xe7\xf5es Funcionais"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Fun\xe7\xe3o:"})," ",s.funcao]})]}):null,(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tipo de Usu\xe1rio:"})," ",s.tipo]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/editar-perfil"),className:"flex items-center justify-center gap-2 w-full bg-emerald-700 hover:bg-emerald-800 text-white font-semibold py-3 rounded-[50px] transition duration-300 shadow-md",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"})," Editar Perfil"]}),(0,a.jsxs)("button",{onClick:()=>e.push("/forgot-password"),className:"flex items-center justify-center gap-2 w-full bg-white text-black font-semibold py-3 rounded-[50px] hover:bg-emerald-200 transition duration-300 shadow-md border border-emerald-300",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"})," Redefinir Senha"]})]}),(0,a.jsxs)("button",{onClick:()=>e.push("/meus-emprestimos"),className:"flex items-center justify-center gap-2 w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-3 rounded-[50px] mt-4 transition duration-300 shadow-md",children:[(0,a.jsx)(b,{className:"w-5 h-5"})," Consultar Empr\xe9stimos"]}),(0,a.jsxs)("button",{onClick:g,className:"flex items-center justify-center gap-2 w-full bg-rose-600 hover:bg-rose-700 text-white font-semibold py-3 rounded-[50px] mt-4 transition duration-300 shadow-md",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5"})," Sair da Conta"]})]}):!o&&(0,a.jsx)("p",{className:"text-center text-white",children:"Carregando perfil..."})]})]})},["aluno","funcionario","funcionario_administrador"])}},function(e){e.O(0,[332,888,774,179],function(){return e(e.s=1044)}),_N_E=e.O()}]);