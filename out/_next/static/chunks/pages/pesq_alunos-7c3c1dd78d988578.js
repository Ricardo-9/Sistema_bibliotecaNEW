(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83],{6517:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pesq_alunos",function(){return s(3768)}])},1089:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var a=s(5893),r=s(7294),l=s(1163),n=s(6816);function c(e,t){return function(s){let c=(0,l.useRouter)(),[o,d]=(0,r.useState)(null),[i,u]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{var e;let{data:{user:s},error:a}=await n.O.auth.getUser();if(a||!s){c.push("/login");return}let r=null===(e=s.user_metadata)||void 0===e?void 0:e.role;if(!r||!t.includes(r)){c.push("/unauthorized");return}d(r),u(!1)})()},[c,t]),i)?(0,a.jsx)("p",{children:"Carregando..."}):o?(0,a.jsx)(e,{...s,role:o}):null}}},2761:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3461:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},1949:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7864:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3768:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),l=s(1163),n=s(6816),c=s(1089),o=s(2761),d=s(8267),i=s(6127),u=s(3461),x=s(7864),h=s(1949);t.default=(0,c.t)(function(e){let{role:t}=e,s=(0,l.useRouter)(),[c,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(""),[b,j]=(0,r.useState)(!1),y=async e=>{j(!0);let t=n.O.from("alunos").select("*").order("created_at",{ascending:!1});e&&""!==e.trim()&&(t=t.ilike("nome","%".concat(e,"%")));let{data:s,error:a}=await t;j(!1),a?(console.error(a),alert(a.message)):m(s||[])};(0,r.useEffect)(()=>{y()},[]);let N=async e=>{confirm("Tem certeza que deseja excluir este aluno?")&&(await n.O.from("alunos").delete().eq("id",e),y(p))};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#006400] flex flex-col items-center justify-start px-4 py-10 relative",children:[(0,a.jsx)("button",{onClick:()=>{"aluno"===t?s.push("/painel_aluno"):s.push("/dashboard")},className:"absolute top-4 right-4 bg-white text-[#006400] rounded-full p-2 shadow-md hover:bg-emerald-100 transition","aria-label":"Voltar",children:(0,a.jsx)(o.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"w-full max-w-6xl bg-[#2e8b57] rounded-[30px] p-8 shadow-2xl z-10 text-white",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-center mb-8 flex items-center justify-center gap-2 drop-shadow",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8"})," Pesquisa de Alunos"]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[(0,a.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"Digite o nome do aluno...",className:"w-full md:w-2/3 px-6 py-3 rounded-full bg-[#006400] text-white font-medium placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white shadow-md"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{y(p)},className:"flex items-center gap-2 bg-white text-[#006400] font-semibold px-5 py-2 rounded-full hover:bg-emerald-100 transition shadow",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"})," Pesquisar"]}),"funcionario_administrador"===t&&(0,a.jsxs)("button",{onClick:()=>s.push("/signup-aluno"),className:"flex items-center gap-2 bg-white text-[#006400] font-semibold px-5 py-2 rounded-full hover:bg-emerald-100 transition shadow",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"})," Cadastrar Aluno"]})]})]}),b?(0,a.jsx)("p",{className:"text-center text-lg font-semibold",children:"Carregando..."}):0===c.length?(0,a.jsx)("p",{className:"text-center text-lg font-semibold",children:"Nenhum aluno encontrado."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-[#1f6f43] text-white text-sm sm:text-base",children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"Nome"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"CPF"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Matr\xedcula"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Endere\xe7o"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Telefone"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"S\xe9rie"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Curso"}),"funcionario_administrador"===t&&(0,a.jsx)("th",{className:"px-4 py-3 text-center",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{children:c.map(e=>(0,a.jsxs)("tr",{className:"odd:bg-[#2e8b57] even:bg-[#237e4d] text-white",children:[(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.nome}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.cpf}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.matricula}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.endereco}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.telefone}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.serie}),(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400]",children:e.curso}),"funcionario_administrador"===t&&(0,a.jsx)("td",{className:"px-4 py-3 border border-[#006400] text-center",children:(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>N(e.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold rounded-full px-3 py-1 shadow-sm","aria-label":"Excluir aluno ".concat(e.nome),children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>s.push("/updates/update_alunos/".concat(e.id)),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full px-3 py-1 shadow-sm","aria-label":"Editar aluno ".concat(e.nome),children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]})},["funcionario_administrador"])}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6517)}),_N_E=e.O()}]);