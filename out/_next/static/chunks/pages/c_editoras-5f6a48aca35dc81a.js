(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{6346:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/c_editoras",function(){return n(6420)}])},1089:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var o=n(5893),r=n(7294),a=n(1163),s=n(6816);function l(e,t){return function(n){let l=(0,a.useRouter)(),[i,u]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{var e;let{data:{user:n},error:o}=await s.O.auth.getUser();if(o||!n){l.push("/login");return}let r=null===(e=n.user_metadata)||void 0===e?void 0:e.role;if(!r||!t.includes(r)){l.push("/unauthorized");return}u(r),c(!1)})()},[l,t]),d)?(0,o.jsx)("p",{children:"Carregando..."}):i?(0,o.jsx)(e,{...n,role:i}):null}}},6420:function(e,t,n){"use strict";n.r(t);var o=n(5893),r=n(9332),a=n(7294),s=n(6816),l=n(1089),i=n(2034),u=n.n(i),d=n(2761),c=n(9673);t.default=(0,l.t)(function(){let e=(0,r.useRouter)(),[t,n]=(0,a.useState)({nome:"",email:"",telefone:""}),[l,i]=(0,a.useState)(""),[f,m]=(0,a.useState)("");function h(e){let{name:t,value:o}=e.target;n(e=>({...e,[t]:o})),m(""),i("")}async function x(o){if(o.preventDefault(),m(""),i(""),t.telefone.length<15){m("Telefone incompleto");return}let{data:r,error:a}=await s.O.from("editoras").select("nome").eq("nome",t.nome.trim());if(a){m("Erro ao verificar editora existente: "+a.message);return}if(r.length>0){m("J\xe1 existe uma editora com esse nome cadastrado.");return}let{error:l}=await s.O.from("editoras").insert([{nome:t.nome.trim(),email:t.email.trim(),telefone:t.telefone.trim()}]);l?m("N\xe3o foi poss\xedvel cadastrar a editora"):(i("Cadastro conclu\xeddo com sucesso!"),n({nome:"",email:"",telefone:""}),setTimeout(()=>e.push("/dashboard"),1500))}return(0,o.jsxs)("div",{className:"relative flex flex-col items-center justify-center min-h-screen bg-[#006400] px-4 sm:px-8",children:[(0,o.jsx)("div",{className:"absolute top-4 right-4 flex gap-4 z-20",children:(0,o.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"bg-white text-[#006400] rounded-full p-2 shadow-md hover:bg-emerald-100 transition","aria-label":"Voltar",children:(0,o.jsx)(d.Z,{className:"w-6 h-6"})})}),(0,o.jsxs)("div",{className:"relative z-10 bg-[#2e8b57] rounded-[30px] p-8 sm:p-12 max-w-xl w-full shadow-2xl",children:[(0,o.jsxs)("h1",{className:"text-3xl sm:text-4xl font-bold text-white text-center mb-8 flex items-center justify-center gap-3 drop-shadow",children:[(0,o.jsx)(c.Z,{className:"w-8 h-8"})," Cadastro de Editoras"]}),f&&(0,o.jsx)("p",{className:"text-red-400 text-center mb-4",children:f}),l&&(0,o.jsx)("p",{className:"text-green-400 text-center mb-4",children:l}),(0,o.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,o.jsx)("input",{className:"w-full p-4 rounded-full border-none shadow-inner focus:outline-none focus:ring-4 focus:ring-green-700 text-green-900 font-semibold",type:"text",name:"nome",placeholder:"Nome",required:!0,value:t.nome,onChange:h,autoComplete:"off"}),(0,o.jsx)("input",{className:"w-full p-4 rounded-full border-none shadow-inner focus:outline-none focus:ring-4 focus:ring-green-700 text-green-900 font-semibold",type:"email",name:"email",placeholder:"Email",required:!0,value:t.email,onChange:h,autoComplete:"off"}),(0,o.jsx)(u(),{className:"w-full p-4 rounded-full border-none shadow-inner focus:outline-none focus:ring-4 focus:ring-green-700 text-green-900 font-semibold",name:"telefone",placeholder:"Telefone",value:t.telefone,onChange:function(e){n({...t,telefone:e.target.value}),m(""),i("")},options:{delimiters:["(",") ","-","-"],blocks:[0,2,5,4],numericOnly:!0},required:!0}),(0,o.jsx)("button",{type:"submit",className:"w-full bg-white text-[#006400] font-bold py-4 rounded-full hover:bg-emerald-100 transition shadow-lg",children:"Cadastrar"})]})]})]})},["funcionario","funcionario_administrador"])}},function(e){e.O(0,[332,767,888,774,179],function(){return e(e.s=6346)}),_N_E=e.O()}]);