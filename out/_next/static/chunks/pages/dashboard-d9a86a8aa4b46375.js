(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(2464)}])},1089:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var s=r(5893),n=r(7294),o=r(1163),a=r(6816);function i(e,t){return function(r){let i=(0,o.useRouter)(),[l,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{var e;let{data:{user:r},error:s}=await a.O.auth.getUser();if(s||!r){i.push("/login");return}let n=null===(e=r.user_metadata)||void 0===e?void 0:e.role;if(!n||!t.includes(n)){i.push("/unauthorized");return}c(n),d(!1)})()},[i,t]),u)?(0,s.jsx)("p",{children:"Carregando..."}):l?(0,s.jsx)(e,{...r,role:l}):null}}},1199:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2464:function(e,t,r){"use strict";r.r(t);var s=r(5893),n=r(1089),o=r(7294),a=r(9332),i=r(6816),l=r(8267),c=r(1199),u=r(9673),d=r(2089);t.default=(0,n.t)(function(e){let{role:t}=e,[r,n]=(0,o.useState)(!0),[h,m]=(0,o.useState)(null),[f,x]=(0,o.useState)({livros:0,alunos:0,funcionarios:0,editoras:0}),p=(0,a.useRouter)();if((0,o.useEffect)(()=>{(async function(){n(!0),m(null);try{var e,t,r,s;let[n,o,a,l]=await Promise.all([i.O.from("livros").select("id",{head:!0,count:"exact"}),i.O.from("alunos").select("id",{head:!0,count:"exact"}),i.O.from("funcionarios").select("id",{head:!0,count:"exact"}),i.O.from("editoras").select("id",{head:!0,count:"exact"})]);if(n.error)throw n.error;if(o.error)throw o.error;if(a.error)throw a.error;if(l.error)throw l.error;x({livros:null!==(e=n.count)&&void 0!==e?e:0,alunos:null!==(t=o.count)&&void 0!==t?t:0,funcionarios:null!==(r=a.count)&&void 0!==r?r:0,editoras:null!==(s=l.count)&&void 0!==s?s:0})}catch(e){m(e.message)}finally{n(!1)}})()},[]),r)return(0,s.jsx)("p",{className:"p-4 text-white",children:"Carregando..."});if(h)return(0,s.jsxs)("p",{className:"text-red-500 p-4",children:["Erro: ",h]});let g=[{nome:"Alunos",total:f.alunos,icon:(0,s.jsx)(l.Z,{className:"w-10 h-10 text-green-600"})},{nome:"Funcion\xe1rios",total:f.funcionarios,icon:(0,s.jsx)(c.Z,{className:"w-10 h-10 text-green-600"})},{nome:"Editoras",total:f.editoras,icon:(0,s.jsx)(u.Z,{className:"w-10 h-10 text-green-600"})},{nome:"Livros",total:f.livros,icon:(0,s.jsx)(d.Z,{className:"w-10 h-10 text-green-600"})}],v=[{label:"Pesquisar Editoras",path:"/pesq_editoras"},{label:"Pesquisar Livros",path:"/pesq_livros"},{label:"Pesquisar Empr\xe9stimos",path:"/p_emprestimos"},..."funcionario_administrador"===t?[{label:"Pesquisar Alunos",path:"/pesq_alunos"},{label:"Pesquisar Funcion\xe1rios",path:"/pesq_funcionarios"}]:[]];return(0,s.jsx)("div",{className:"min-h-screen bg-[#006400] py-10",children:(0,s.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-10 text-center text-white",children:"Painel Geral"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-12",children:g.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col items-center justify-center text-center hover:scale-105 transition-transform duration-300",children:[e.icon,(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mt-4",children:e.nome}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-700 mt-2",children:e.total})]},e.nome))}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:v.map(e=>{let{label:t,path:r}=e;return(0,s.jsx)("button",{onClick:()=>p.push(r),className:"w-full bg-[#004d00] hover:bg-[#003f00] text-white font-semibold py-4 px-6 rounded-[70px] transition duration-300 shadow-md",children:t},t)})})]})})},["funcionario","funcionario_administrador"])}},function(e){e.O(0,[332,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);