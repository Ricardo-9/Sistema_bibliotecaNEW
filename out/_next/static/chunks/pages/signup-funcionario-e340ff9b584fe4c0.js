(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{8190:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup-funcionario",function(){return a(1823)}])},1823:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return c}});var r=a(5893),l=a(7294),s=a(1163),o=a(6816),t=a(2034),i=a.n(t),u=a(2761);function c(){let e=(0,s.useRouter)(),[n,a]=(0,l.useState)({nome:"",funcao:"",cpf:"",email:"",senha:"",endereco:"",telefone:"",role:"funcionario"}),[t,c]=(0,l.useState)(""),d=e=>{let{name:r,value:l}=e.target,s=m(r,l);a({...n,[r]:s})},m=(e,n)=>{switch(e){case"nome":case"funcao":return n.replace(/[^a-zA-ZÀ-ÿ\s]/g,"").slice(0,100);case"cpf":return n.replace(/\D/g,"").slice(0,11);case"telefone":return n.replace(/\D/g,"").slice(0,15);default:return n}},h=async a=>{a.preventDefault(),c("");let{nome:r,funcao:l,cpf:s,telefone:t,email:i,senha:u,endereco:d,role:m}=n;if(11!==s.length)return c("CPF deve ter exatamente 11 n\xfameros.");if(t.length<10)return c("Telefone inv\xe1lido.");let{data:h,error:f}=await o.O.auth.signUp({email:i,password:u,options:{data:{role:m}}});if(f||!h.user){c((null==f?void 0:f.message)||"Erro ao cadastrar");return}let{error:p}=await o.O.from("funcionarios").insert({nome:r,funcao:l,cpf:s,telefone:t,email:i,endereco:d,user_id:h.user.id});p?c(p.message):e.push("/dashboard")},f="w-full p-4 rounded-full font-semibold text-emerald-900 bg-white shadow-inner focus:outline-none focus:ring-4 focus:ring-emerald-800/30 placeholder:text-lg placeholder:font-bold";return(0,r.jsxs)("div",{className:"min-h-screen bg-[#006400] flex items-center justify-center px-4 py-10 relative",children:[(0,r.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,r.jsx)("button",{onClick:async()=>{var n;let{data:a,error:r}=await o.O.auth.getUser();if(r||!(null==a?void 0:a.user)){e.push("/");return}"funcionario_administrador"===(null===(n=a.user.user_metadata)||void 0===n?void 0:n.role)?e.push("/dashboard"):e.push("/")},className:"bg-white text-[#006400] rounded-full p-2 shadow-md hover:bg-emerald-100 transition","aria-label":"Voltar",children:(0,r.jsx)(u.Z,{className:"w-6 h-6"})})}),(0,r.jsxs)("div",{className:"w-full max-w-2xl p-10 bg-[#2e8b57] rounded-3xl shadow-xl",children:[(0,r.jsx)("h1",{className:"text-white text-3xl font-bold text-center mb-8",children:"Cadastro de Funcion\xe1rio"}),(0,r.jsxs)("form",{onSubmit:h,className:"flex flex-col gap-5",children:[(0,r.jsx)("input",{name:"nome",placeholder:"Nome",required:!0,onChange:d,value:n.nome,className:f}),(0,r.jsx)("input",{name:"funcao",placeholder:"Fun\xe7\xe3o",required:!0,onChange:d,value:n.funcao,className:f}),(0,r.jsx)(i(),{name:"cpf",placeholder:"CPF",options:{delimiters:[".",".","-"],blocks:[3,3,3,2],numericOnly:!0},value:n.cpf,onChange:d,className:f}),(0,r.jsx)("input",{type:"email",name:"email",placeholder:"Email",required:!0,maxLength:100,onChange:d,value:n.email,className:f}),(0,r.jsx)("input",{type:"password",name:"senha",placeholder:"Senha",required:!0,minLength:6,maxLength:50,onChange:d,value:n.senha,className:f}),(0,r.jsx)("input",{name:"endereco",placeholder:"Endere\xe7o",required:!0,maxLength:200,onChange:d,value:n.endereco,className:f}),(0,r.jsx)(i(),{name:"telefone",placeholder:"Telefone",options:{delimiters:["(",") "," ","-"],blocks:[0,2,5,4],numericOnly:!0},value:n.telefone,onChange:d,className:f}),(0,r.jsxs)("select",{name:"role",value:n.role,onChange:d,className:f,children:[(0,r.jsx)("option",{value:"funcionario",children:"Funcion\xe1rio"}),(0,r.jsx)("option",{value:"funcionario_administrador",children:"Funcion\xe1rio Administrador"})]}),(0,r.jsx)("button",{type:"submit",className:"bg-white text-emerald-900 font-bold rounded-full px-6 py-3 hover:bg-emerald-100 transition",children:"Cadastre-se"}),t&&(0,r.jsx)("p",{className:"text-white text-center font-semibold",children:t})]})]})]})}}},function(e){e.O(0,[767,888,774,179],function(){return e(e.s=8190)}),_N_E=e.O()}]);